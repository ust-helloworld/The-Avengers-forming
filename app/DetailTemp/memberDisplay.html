<html ng-app = "teamform-memberDisplay-app">
<head> 
<title>Profile testing</title> 

    <!-- Customized libraries shared by pages -->
    <script src="../js/site.js"></script>
	<!-- Angular and Angular-route libraries (v1.5.7) -->
    <script src="../lib/angular.min.js"></script>
    <script src="../lib/angular-route.min.js"></script>
    <!-- Firebase (v3.0.3) and AngularFire (v2.0.0) (after angular library is loaded) -->
    <script src="../lib/firebase.js"></script>     
    <script src="../lib/angularfire.min.js"></script>
	
	  <!-- Add bootstrap and jQuery -->
    <script src = "../lib/jquery.min.js"></script>
    <script src = "../lib/bootstrap.min.js"></script>

</head>
<body>

<div id = "YourProfile" ng-controller = "ProfileAcc" class="text-center">
  Please input your data:)<br>Use UserID and activity to access data from database.<br>
  <form id = "ProfileForm">
    <label>Your UserId:<input type=text ng-model = "FUID"></label><br>
    <label>You apply for activity: <input type = text ng-model = "activity"></label><br>
	<!--<label> You received group invitation for : <span ng-repeat = "xinvite in inviteReceived" ng-click = "accept(xinvite)">{{xinvite}}  </span></label><br>-->
    <input type = "button" ng-click = "load(FUID, activity)" value = "load"> 
  </form>
  <div id = "testing_ouput">
    {{ datadebug | json}}
	<pre>
	Your Name : {{datadebug.name}}
	You are well-known in {{datadebug.skills}}
	</pre>
  </div>
   
 </div>
   

<script>
   
angular.module('teamform-memberDisplay-app',['firebase'])
.controller('ProfileAcc',  ['$scope', '$firebaseObject', '$firebaseArray',function($scope, $firebaseObject, $firebaseArray) {

  //initalizeFirebase();
  initalizeFirebase();
  database = firebase.database();
  
  $scope.FUID = "ng";
  $scope.activity = "def";
  $scope.datadebug = {};
  
  $scope.load = function (FUID, activity) {
    if ( FUID !== '' ) {
  
      var refPath = activity + "/member/" + FUID;
      alert (refPath);
      //This is the way for getting data from firebase
      //.once("value") <--the value inside value must be value;
	  // changed to angularFire mode (10/11/2016)
	  memberData = $firebaseObject(firebase.database().ref(refPath));
	  memberData.$loaded().
	  then(function (data){
	    $scope.datadebug = data;
	  });
    }
  };
  

}]);
   
   </script>

</body>
</html>